{% extends 'base.html' %} {% load static %} {% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}Cerberus | Planificación de esquema de seguridad {%endblock title %}
    </title>
  </head>

  <body>
    {% block content %}

    <main id="main" class="main">
      <!--Contenido de la pagina-->
      <section class="section">
        <div class="col-12 align-items-center">
          <div class="col-lg-full">
            <div class="container-fluid">
              <div class="row">
                <div class="sidebar col-sm-2 hidden-xs pt-5">
                  <!--Barra lateral-->
                  {% for datos in militares %}
                  <!--Iterar usuarios alojados o registrados en la instalacion-->
                  <div style="font-size: 12px" class="card mb-0 my-4 pt-3">
                    <!--Tarjeta-->
                    <div class="card-body">
                      <img
                        draggable="false"
                        width="50px"
                        src="{{datos.militar.foto.url}}"
                      />
                      <div
                        style="font-size: 15px !important"
                        class="card-title fs-6 pb-0 pt-1"
                      >
                        {{ datos.militar.apellidos }} {{ datos.militar.nombres }}
                      </div>
                      <h6
                        style="font-size: 13px !important"
                        class="card-subtitle text-muted"
                      >
                        {{ datos.militar.rango }} (
                          {{ datos.militar.rango.abreviatura }})
                      </h6>
                      <p class="card-text">
                        Promedio de efectividad en polígonos: 5,2
                      </p>
                      <button
                        type="button"
                        class="btn btn-primary"
                        data-bs-toggle="modal"
                        data-bs-target="#exampleModal"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-plus-circle-fill"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"
                          ></path>
                        </svg>
                        Agregar
                      </button>
                    </div>
                  </div>
                  {% endfor %}
                  <ul id="list"></ul>
                </div>
                <div class="col-sm-9 col-sm-offset-3">
                  <div>
                    <img
                      draggable="false"
                      width="100px"
                      src="{{datos.militar.foto.url}}"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!--Plano de esquema de seguridad-->
            <div class="contenedor">
              <div>
                <img
                  class="imagen"
                  draggable="false"
                  src="{{ ubicacion.instalacion.planos.url }}"
                />
              </div>
            </div>
          </div>

          <link
            rel="stylesheet"
            href="{% static 'css/esquema_seguridad.css' %}"
          />
          <script src="{% static 'js/zoomPlano.js' %}"></script>
          <script src="{% static 'js/dragdrop.js' %}"></script>

          <!-- Modal -->
          <div
            class="modal fade"
            id="exampleModal"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Datos de integrante de esquema de seguridad
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <form method="POST">
                    {% block int_esquema_form %} {% csrf_token %}
                    <!--Token de acceso-->

                    <div class="col-8" id="militar">
                      {{ form.militar | as_crispy_field}}
                    </div>
                    <div class="col-8" id="arma">
                      {{ form.arma | as_crispy_field}}
                    </div>

                    <div class="col-8" id="tarea">
                      {{ form.tarea | as_crispy_field}}
                    </div>

                    <div class="col-8" id="submit">
                      <button type="submit" class="btn btn-success">Registrar</button>
                    </div>
                    {% endblock int_esquema_form %}
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- End #main -->

    {% endblock content %}
  </body>
</html>
